Алгоритмы приведения отношений к 3 НФ.


![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image002.jpg)Алгоритм1: пополняющий декомпозицию схем отношений, которая обладает свойством соединения без потерь и приводит к отношениям находящимся в НФБК.  
_Входные данные_: схема отношения ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image004.png) и функциональные зависимости ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image006.png).  
_Выходные данные_: декомпозиция ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image008.png), обладающая свойством соединения без потерь, такая, что каждая схема отношения в декомпозиции находится в НФБК относительно проекции ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image006.png) на эту схему.  
_Метод_: декомпозиция ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image011.png) для ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image008.png) конструируется итеративным методом![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image014.png). Существует ключ ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image016.png) ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image018.png). Если ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image020.png) схема отношения из ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image011.png) и ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image022.png) не находится в НФБК, то пусть ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image024.png) – зависимость, имеющая место в ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image022.png), где ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image027.png) не содержит ключа ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image022.png), а ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image030.png).  
Тогда в ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image022.png) должен существовать некоторый атрибут, который не принадлежит ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image033.png) и не принадлежит ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image027.png). В противном случае ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image027.png) содержал бы ключ ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image022.png). Заменим ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image022.png) на ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image039.png) и ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image041.png), где ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image039.png) состоит из ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image033.png) и атрибутов ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image027.png), а ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image041.png) – из всех атрибутов ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image022.png), за исключением ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image033.png). ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image043.png) и ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image045.png). (это удаление транзитивной зависимости ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image047.png). Если в ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image039.png) и ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image041.png) существуют транзитивные зависимости, то делаем декомпозиции и для ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image049.png).

![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image051.jpg)Алгоритм 2: приведения отношения к 3НФ, использующей декомпозицию, сохраняющую функциональные зависимости.  
_Входные данные:_ схема отношения ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image004.png) и множество функциональных зависимостей ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image006.png).  
_Выходные данные:_ сохраняющая зависимости декомпозиция схемы отношения ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image008.png) такая, что каждая входящая в нее схема отношения находится в 3НФ относительно проекции ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image006.png) на эту схему.  
_Метод:_ если существует некоторый атрибут в ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image008.png), участвующий в левой или правой части какой-либо зависимости из ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image006.png), то этот атрибут может сам по себе образовать некоторую схему отношения и его можно исключить из ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image008.png). Если в одной из зависимостей ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image006.png) участвуют все атрибуты ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image008.png), то выходные данные образуют само ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image008.png). В противном случае декомпозиция, образующая выходные данные, состоит из схемы ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image054.png) для каждой зависимости ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image024.png) в ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image006.png). Если, однако, в ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image006.png) имеются зависимости ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image058.png), то может быть использована схема ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image060.png) вместо ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image062.png), и такая подстановка является предпочтительной.

Теорема: Пусть ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image020.png)декомпозиция ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image008.png), образованная схемами отношений в 3НФ и построенная по алгоритму 2. Пусть ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image066.png)ключ ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image008.png). Тогда ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image069.png) декомпозиция ![](file:///C:/Users/BADF~1/AppData/Local/Temp/msohtmlclip1/01/clip_image008.png)такая, что все ее схемы отношений находятся в 3НФ. Эта декомпозиция сохраняет зависимости и обладает свойством соединения без потерь.


